<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo JSON & AJAX 2</title>
    <link rel="stylesheet" href="libs/bootstrap-3.4.1/css/bootstrap.min.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaj0mHlR-keu-9hsR6d-gB0L9BclG04rk&callback=initMap&libraries=&v=weekly"
            defer
    ></script>
    <link rel="stylesheet" href="css/demomap.css">

</head>
<body>
    <section class="col-md-12">
        <div class="container">
            <div class="col-md-3">
                <select class="form-control" name="city">
                    <option value="ha noi,vn">Hà Nội</option>
                    <option value="saigon, vn">TP. Hồ Chí Minh</option>
                    <option value="haiphong, vn">Hải Phòng</option>
                </select>
            </div>
            <div class="col-md-6">
            <h2 class="row location_info"></h2>
            <div class="row location_weather">

            </div>
            </div>
        </div>
    </section>
    <section class="col-md-12">
        <div class="container">
            <div id="map"></div>
        </div>
    </section>
<script src="libs/jquery/jquery-3.5.1.js"></script>
<script type="text/javascript">
    $("select[name = city]").bind("change", loadData());
    function loadData() {
        var city = $("select[name=city]").val();
        $.ajax({
            url: "http://api.openweathermap.org/data/2.5/weather",
            method: "get",
            data: {
                q:city,
                appid:"09a71427c59d38d6a34f89b47d75975c",
                units:"metric",
            },
            success: function (rs) {
            var location_name = rs.sys.country;
            var thanhpho = rs.name;
            var where = thanhpho + " ," + location_name;
            $(".location_info").text(where);
            var temperture = rs.main.temp;
            var humid = rs.main.humidity;
            var wind = rs.wind.speed;
            var lon = rs.coord.lon;
            var lat = rs.coord.lat;
            var weather_data =
                "                <h4>Nhiệt độ: "+temperture+"°C</h4>\n" +
                "                <h4>Độ ẩm: "+humid+"%</h4>\n" +
                "                <h4>Tốc độ gió: "+wind+"km/h</h4>\n" +
                "                <h4>Toạ độ: "+lon+", "+lat+"</h4>\n" +
                "            </div>"
                $(".location_weather").append(weather_data);
            }
        })
    }
    loadData();
</script>
    <script>
        let map;

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 21.0288296, lng: 105.7820904 },
                zoom: 16,
            });
        }
    </script>
</body>
</html>